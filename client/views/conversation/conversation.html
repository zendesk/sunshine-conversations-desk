<template name="conversation">
  {{#contentFor 'header'}}
  <h1>{{conversation.name}}</h1>
  {{/contentFor}}

  <ul>
    {{#each messages}}
    {{> message}}
    {{/each}}
  </ul>

  {{#contentFor 'right'}}
  {{> profile}}
  {{/contentFor}}

  {{#contentFor 'footer'}}
  {{> messageForm}}
  {{/contentFor}}

  {{> home}}
</template>

<template name="message">
  {{#if date}}
  <h2>{{date}}</h2>
  {{/if}}
  <li>
    <img src="{{avatarUrl}}" class="avatar">
    <div class="message-body">
      <div><span class="username">{{name}}</span> <span class="time">{{time}}</span></div>
      <div class="message">
        {{#if items}}
          Sent a carousel:
          {{#each items}}
          <ul>
            <li>{{> messageItem}}</li>
          </ul>
          {{/each}}
        {{else}}
          {{#if imageUrl}}<img alt="image message" src="{{imageUrl}}">{{/if}}
          {{#markdown}}{{{text}}}{{/markdown}}
          {{#each actions}}
          <ul>
            <li>{{> messageAction}}</li>
          </ul>
          {{/each}}
        {{/if}}
      </div>
    </div>
  </li>
</template>

<template name="messageAction">
  <div class="message-action"><span class="text">{{text}}</span><span class="type">({{type}})</span></div>
</template>

<template name="messageItem">
  <div class="message-carousel">
    <div>{{title}}</div>
    <!-- {{#if mediaUrl}}-->
    <img src="{{mediaUrl}}" />
    <!-- {{/if}}-->
    {{#each actions}}
    <ul>
      <li>{{> messageAction}}</li>
    </ul>
    {{/each}}
  </div>
</template>

